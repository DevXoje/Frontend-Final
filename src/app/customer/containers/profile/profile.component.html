<!--<app-shop-layout>-->
<div>
	<!--TODO: Add a profile nav
	<app-cart-nav topHeader></app-cart-nav>
	-->
	<div *ngIf="customer$ | async as customer" class="row py-5 px-4" content>
		<div class="col-md-5 mx-auto">
			<!-- Profile widget -->
			<div class="bg-white shadow rounded overflow-hidden">

				<div class="px-4 pt-0 pb-4 cover">
					<div class="media align-items-end profile-head">
						<div class="profile mr-3">
							<img
								alt="..."
								class="rounded mb-2 img-thumbnail"
								src="https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=80"
								width="130"
							/><a [routerLink]="['/auth/edit',customer.id]"
								 class="btn btn-outline-dark btn-sm btn-block">Edit
							profile</a>
						</div>
						<div class="media-body mb-5">
							<h4 class="mt-0 mb-0">{{ customer.name }}</h4>
							<p class="small mb-4">
								{{ customer.email }}
							</p>
							<p class="small mb-4">
								<fa-icon [icon]="iconMark"></fa-icon>
								<i class="fas fa-map-marker-alt mr-2"></i
								>{{ customer.address|json }}
							</p>
						</div>
					</div>
				</div>
				<ng-container *ngIf="!customer.official_doc; else completed">
					<div class="bg-light p-4 d-flex justify-content-end text-center">
						not completed
						<button [routerLink]="['/shop/customer/complete']" class="btn btn-primary">Complete Profile
						</button>
					</div>
				</ng-container>
				<ng-template #completed>
					<div *ngIf="orders$|async as orders" class="bg-light p-4 d-flex justify-content-end text-center">
						<ul class="list-inline mb-0">
							<li class="list-inline-item">
								<h5 class="font-weight-bold mb-0 d-block">{{numOrders}}</h5>
								<small class="text-muted">
									<i class="fas fa-image mr-1"></i>Compras</small
								>
							</li>
							<li class="list-inline-item">
								<h5 class="font-weight-bold mb-0 d-block">{{numItems}}</h5>
								<small class="text-muted">
									<i class="fas fa-user mr-1"></i>Productos</small
								>
							</li>
							<li class="list-inline-item">
								<h5 class="font-weight-bold mb-0 d-block">340</h5>
								<small class="text-muted">
									<i class="fas fa-user mr-1"></i>Ble</small
								>
							</li>
						</ul>
					</div>

					<div *ngIf="lastOrder$ | async as order" class="px-4 py-3">
						<h5 class="mb-0">Dejo esta compra sin completar</h5>
						<div class="p-4 rounded shadow-sm bg-light">
							<h5 *ngFor="let order_item of order.order_items"
								class="font-italic mb-0">{{order_item.product}} * {{order_item.quantity}}
								=> {{order_item.quantity|currency}}</h5>
							<h4>Total =>{{ order.amount |currency}}</h4>
							<div class="controls">
								<button [routerLink]="['/shop']" class="btn btn-primary">
									Continue
								</button>
								<button [routerLink]="['/shop/checkout']" class="btn btn-success">
									Complete
								</button>
								<button (click)="handlerDeleteLastOrder($event)" class="btn btn-danger">
									Cancel
								</button>
							</div>
						</div>
					</div>


					<div class="py-4 px-4">
						<div class="d-flex align-items-center justify-content-between mb-3">
							<h5 class="mb-0">Historico de compras</h5>
							<a class="btn btn-link text-muted" href="#">Show all</a>
						</div>
						<div *ngIf="orders$|async as orders" class="row">
							<div *ngFor="let item of orders" class="col-lg-6 mb-2 pr-lg-1 bg-light">
								<!-- <img
									src="https://images.unsplash.com/photo-1469594292607-7bd90f8d3ba4?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80"
									alt=""
									class="img-fluid rounded shadow-sm"
								/> -->
								<p>
									fecha de compra:
									{{ item.updated_at | date: "dd/MM/yyyy" }}
								</p>
								<p>
								<span class="font-weight-bold">
									{{ item.amount | currency }}
								</span>
								</p>
							</div>
						</div>
					</div>
				</ng-template>


			</div>
		</div>
	</div>
</div>
<!--</app-shop-layout>-->
